

<h1>Entries</h1>

<table class="table table-striped table-hover w-25 p-3">
    <thead class="thead-dark">
        <tr>
            <th scope="col" width="10%">#</th>
            <th scope="col" width="10%">Name</th>
            <th scope="col" width="10%">Service</th>
            <th scope="col" width="10%">view more</th>
        </tr>
    </thead>
    <tbody>
        <% entries.forEach(entry => { %>
            <tr>
                <th scope="row"><%= entry.id %></th>
                <td><%= entry.name %></td>
                <td><%= entry.service %></td>
                <td class="w-25 p-3">
                        <button type="button" class="btn btn-info view" data-id="<%= entry.id %>">View</button>
                </td>
                <td>
                    <form action=<%= `/delete/${entry.id}`  %> method="post">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                    
                </td>
            </tr>
        <% }) %>
    </tbody>

</ul>
</table>
<div class="d-flex justify-content-center embed-responsive" id="view-frame" >
    <iframe id=iframe name="edit" src="" allowfullscreen class="embed-responsive-item"></iframe>
</div>

<script>
    let view_buttons = document.getElementsByClassName("view");
    let iframe_div = document.getElementById("view-frame");
    const iframe = document.getElementById('iframe');

    console.log(view_buttons)

    for (let button of view_buttons) {
        button.addEventListener('click', () => {
            const entryId = button.getAttribute('data-id')
            let visiblity_style = window.getComputedStyle(iframe_div)
            let iframe_visiblity = visiblity_style.getPropertyValue('visibility')
            if (iframe_visiblity === 'collapse') {
                iframe_div.style.visibility = 'visible';
            }
            iframe.src = `/entry/${entryId}`;
        })
    }
</script>